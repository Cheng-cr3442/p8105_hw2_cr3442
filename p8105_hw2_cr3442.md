p8105_hw2_cr3442
================
Cheng Rao
2024-10-02

# Problem 1

First, let us read and clean the NYC Transit data.

``` r
#Read and clean the NYC Transit data
nyc_trans_df = 
  read_csv(
    "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
  ) %>%
  janitor::clean_names() %>% 
  
#Retain line, station, name, station latitude / longitude, routes served, entry, vending, entrance type, and ADA compliance
  select(
    .,line, station_name, station_latitude, station_longitude, starts_with("route"), entry, vending, entrance_type, ada
    )  %>%
  
#Convert the entry variable from character to a logical variable
  mutate(
    entry = recode(entry, "YES" = TRUE, "NO" = FALSE),
    vending = recode(vending, "YES" = TRUE, "NO" = FALSE),
      )
  
#check if the variables are right or not
str(nyc_trans_df)
```

    ## tibble [1,868 × 19] (S3: tbl_df/tbl/data.frame)
    ##  $ line             : chr [1:1868] "4 Avenue" "4 Avenue" "4 Avenue" "4 Avenue" ...
    ##  $ station_name     : chr [1:1868] "25th St" "25th St" "36th St" "36th St" ...
    ##  $ station_latitude : num [1:1868] 40.7 40.7 40.7 40.7 40.7 ...
    ##  $ station_longitude: num [1:1868] -74 -74 -74 -74 -74 ...
    ##  $ route1           : chr [1:1868] "R" "R" "N" "N" ...
    ##  $ route2           : chr [1:1868] NA NA "R" "R" ...
    ##  $ route3           : chr [1:1868] NA NA NA NA ...
    ##  $ route4           : chr [1:1868] NA NA NA NA ...
    ##  $ route5           : chr [1:1868] NA NA NA NA ...
    ##  $ route6           : chr [1:1868] NA NA NA NA ...
    ##  $ route7           : chr [1:1868] NA NA NA NA ...
    ##  $ route8           : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ route9           : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ route10          : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ route11          : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ entry            : logi [1:1868] TRUE TRUE TRUE TRUE TRUE TRUE ...
    ##  $ vending          : logi [1:1868] TRUE TRUE TRUE TRUE TRUE TRUE ...
    ##  $ entrance_type    : chr [1:1868] "Stair" "Stair" "Stair" "Stair" ...
    ##  $ ada              : logi [1:1868] FALSE FALSE FALSE FALSE FALSE FALSE ...

In the above process, we loaded the NYC Transit dataset and named it
`nyc_trans_df`. There are 1868 rows and 19 columns in the dataset
`nyc_trans_df`. And we cleaned the names of columns, selected the
desired variables and changed two character variables to logical
variables —- `entry` and `vending`. The dataset contained the following
variables: line, station_name, station_latitude, station_longitude,
route1, route2, route3, route4, route5, route6, route7, route8, route9,
route10, route11, entry, vending, entrance_type, ada. These data are not
tidy enough.

Then we are going to answer the questions of Problem 1.

At last reformat the data.

``` r
#Reformat
dist_route_df = station_distinct %>%
#Convert
mutate_at(vars(route8:route11), as.character) %>% 
  pivot_longer(
    route1:route11,
    names_to = "route",
    values_to = "train")

#Output the front part of the reformatted data frame
head(dist_route_df)
```

    ## # A tibble: 6 × 10
    ##   line     station_name station_latitude station_longitude entry vending
    ##   <chr>    <chr>                   <dbl>             <dbl> <lgl> <lgl>  
    ## 1 4 Avenue 25th St                  40.7             -74.0 TRUE  TRUE   
    ## 2 4 Avenue 25th St                  40.7             -74.0 TRUE  TRUE   
    ## 3 4 Avenue 25th St                  40.7             -74.0 TRUE  TRUE   
    ## 4 4 Avenue 25th St                  40.7             -74.0 TRUE  TRUE   
    ## 5 4 Avenue 25th St                  40.7             -74.0 TRUE  TRUE   
    ## 6 4 Avenue 25th St                  40.7             -74.0 TRUE  TRUE   
    ## # ℹ 4 more variables: entrance_type <chr>, ada <lgl>, route <chr>, train <chr>

- **Answers:**
- 1.There are 465 stations in NYC.
- 2.There are 84 ADA compliant.
- 3.The proportion of station entrances / exits without vending allow
  entrance is 0.3770492.
- 4.There are 60 stations serving the A train.
- 5.The number of distinct stations serving the A train and are ADA
  compliant is 17.
